{{> auth-head}}

<div class="auth-container">
  <h1 class="title">
    <a href="/" class="logo-link">
      <span class="fit">Fit</span><span class="glue">Glue</span>
    </a>
  </h1>

  <div class="auth-box" style="text-align: center;">
    <p class="auth-description" style="text-align: center; margin-bottom: 2rem; font-size: 1.1rem;">
      Thanks for joining the <strong style="color: #FF006E;">Fit</strong><strong style="color: #8338EC;">Glue</strong>
      waitlist! We're rolling out access in waves and will email you as soon as your spot is ready.
    </p>

    <div
      style="background: rgba(30, 30, 35, 0.8); border: 1px solid rgba(131, 56, 236, 0.2); border-radius: 0.75rem; padding: 1.5rem; margin-bottom: 2rem; text-align: left;">
      <h3
        style="color: #a5a5a5; font-size: 0.85rem; font-weight: 600; letter-spacing: 0.05em; margin: 0 0 1.25rem 0; text-transform: uppercase;">
        What Happens Next</h3>

      <div style="display: flex; flex-direction: column; gap: 1rem;">
        <div style="display: flex; align-items: flex-start; gap: 0.75rem;">
          <span style="font-size: 1.25rem;">üìß</span>
          <span style="color: #f5f5f5; font-size: 0.95rem;">Check your email to verify your address</span>
        </div>
        <div style="display: flex; align-items: flex-start; gap: 0.75rem;">
          <span style="font-size: 1.25rem;">‚è≥</span>
          <span style="color: #f5f5f5; font-size: 0.95rem;">We'll review your registration</span>
        </div>
        <div style="display: flex; align-items: flex-start; gap: 0.75rem;">
          <span style="font-size: 1.25rem;">üöÄ</span>
          <span style="color: #f5f5f5; font-size: 0.95rem;">You'll get an email when access is enabled</span>
        </div>
      </div>
    </div>

    <div style="border-top: 1px solid rgba(131, 56, 236, 0.2); padding-top: 1.5rem;">
      <p style="color: #a5a5a5; margin-bottom: 1rem; font-size: 0.9rem;">Already received access?</p>
      <a href="/auth/login" class="btn primary" id="btn-login"
        style="display: block; width: 100%; text-align: center; text-decoration: none;">Login Now</a>
    </div>
  </div>
</div>

<script type="module">
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
  import { getAuth, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

  async function getFirebaseConfig() {
    try {
      const response = await fetch('/__/firebase/init.json');
      if (response.ok) {
        return await response.json();
      }
    } catch (e) {
      console.warn('Could not load Firebase config:', e);
    }
    return null;
  }

  async function init() {
    const firebaseConfig = await getFirebaseConfig();
    if (!firebaseConfig) {
      console.error('Could not initialize authentication.');
      return;
    }

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Login button should sign out first then redirect to login
    document.getElementById('btn-login').addEventListener('click', async (e) => {
      e.preventDefault();
      try {
        await signOut(auth);
      } catch (error) {
        console.error('Logout error:', error);
      }
      window.location.href = '/auth/login';
    });
  }

  init();
</script>

{{> auth-footer}}